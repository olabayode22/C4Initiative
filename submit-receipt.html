<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Receipt - C4 Bingo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="updated-styles.css">
    <link rel="stylesheet" href="banner-fix.css">
    <link rel="stylesheet" href="navbar-styles.css">
    <link rel="stylesheet" href="footer-styles.css">
    <link rel="stylesheet" href="auth-styles.css">
    <link rel="stylesheet" href="images/backgrounds/chelsea_skyline.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header class="horizontal-nav">
        <div class="container">
            <div class="logo">
                <a href="index.html">C4 Bingo</a>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="how-it-works.html">How It Works</a></li>
                    <li><a href="businesses.html">Businesses</a></li>
                    <li><a href="prizes.html">Prizes</a></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="register.html" class="nav-button">Register</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="auth-container receipt-page">
            <div class="auth-card">
                <div class="auth-header">
                    <h2>Submit Your Receipt</h2>
                    <p>Upload your receipt from a participating business to mark squares on your bingo card!</p>
                </div>
                
                <!-- Success message (hidden by default) -->
                <div class="success-message">
                    <p><i class="fas fa-check-circle"></i> Receipt submitted successfully! Your bingo card has been updated.</p>
                </div>
                
                <form id="receipt-form" class="receipt-form">
                    <div class="form-group">
                        <label for="business">Select Business</label>
                        <select id="business" name="business" required>
                            <option value="" disabled selected>Choose a business</option>
                            <option value="kushala">Kushala</option>
                            <option value="sl-subs">S&L Subs</option>
                            <option value="kims-beauty">Kim's Beauty Design</option>
                            <option value="aloe-natural">Aloe Natural</option>
                            <option value="admiral-hills">Admiral Hills Marina</option>
                            <option value="curlys">Curly's Restaurant</option>
                            <option value="ciao-pizza">Ciao! Pizza & Pasta</option>
                            <option value="michael-gs">Michael G's</option>
                            <option value="sauna-suites">Sauna Suites</option>
                            <option value="apollinaire">Apollinaire Theatre</option>
                            <option value="mi-salvador">Mi Salvador Mexicano Store</option>
                            <option value="helados-julis">Helados Juli's</option>
                            <option value="pan-y-cafe">Pan y Cafe</option>
                            <option value="los-agaves">Los Agaves</option>
                            <option value="archery-games">Archery Games</option>
                            <option value="tambo-22">Tambo 22</option>
                            <option value="victorias-diner">Victorias Diner</option>
                            <option value="tu-casa">Tu Casa Restaurante y Bar</option>
                            <option value="la-esquina">La Esquina Mariachi</option>
                            <option value="el-potro">El Potro Mexican Grill</option>
                            <option value="brown-jug">The Brown Jug</option>
                            <option value="katz-bagel">Katz Bagel Bakery</option>
                            <option value="fancy-nails">Fancy Nails & Spa</option>
                        </select>
                        <div class="error-message">Please select a business</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="receipt-date">Receipt Date</label>
                        <input type="date" id="receipt-date" name="receipt-date" required>
                        <div class="error-message">Please select a valid date</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="receipt-amount">Purchase Amount</label>
                        <input type="number" id="receipt-amount" name="receipt-amount" min="0.01" step="0.01" placeholder="0.00" required>
                        <div class="error-message">Please enter a valid amount</div>
                    </div>
                    
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-receipt"></i>
                        </div>
                        <div class="upload-text">
                            <h4>Upload Receipt Image</h4>
                            <p>Click or drag and drop your receipt image here</p>
                            <p>Accepted formats: JPG, PNG, HEIC</p>
                        </div>
                        <input type="file" id="receipt-image" name="receipt-image" accept="image/*" class="file-input" required>
                    </div>
                    <div class="error-message" id="upload-error">Please upload a receipt image</div>
                    
                    <!-- Receipt preview (hidden by default) -->
                    <div class="receipt-preview" id="receipt-preview">
                        <img src="" alt="Receipt preview" class="preview-image" id="preview-image">
                        <div class="preview-details">
                            <p><strong>File name:</strong> <span id="file-name"></span></p>
                            <p><strong>File size:</strong> <span id="file-size"></span></p>
                        </div>
                    </div>
                    
                    <div class="form-group checkbox">
                        <input type="checkbox" id="terms" name="terms" required>
                        <label for="terms">I confirm this is a valid receipt from the selected business and was obtained within the last 7 days.</label>
                        <div class="error-message">You must confirm this is a valid receipt</div>
                    </div>
                    
                    <button type="submit" class="auth-btn">
                        <span class="loading-spinner"></span>
                        Submit Receipt
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>Need help? <a href="#" id="support-link">Contact our support team</a></p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>C4 Bingo</h4>
                    <p>A community initiative by the Chelsea Cannabis Community Connection to support local businesses.</p>
                </div>
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="how-it-works.html">How It Works</a></li>
                        <li><a href="businesses.html">Businesses</a></li>
                        <li><a href="prizes.html">Prizes</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Account</h4>
                    <ul class="footer-links">
                        <li><a href="register.html">Register</a></li>
                        <li><a href="login.html">Login</a></li>
                        <li><a href="#">My Bingo Card</a></li>
                        <li><a href="submit-receipt.html">Submit Receipt</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact</h4>
                    <ul class="footer-links">
                        <li><a href="mailto:info@c4bingo.org">info@c4bingo.org</a></li>
                        <li><a href="tel:+15551234567">(555) 123-4567</a></li>
                        <li><a href="#">123 Main St, Chelsea, MA</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Chelsea Cannabis Community Connection (C4) Program. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // File upload handling
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('receipt-image');
        const previewContainer = document.getElementById('receipt-preview');
        const previewImage = document.getElementById('preview-image');
        const fileName = document.getElementById('file-name');
        const fileSize = document.getElementById('file-size');
        
        // Click on upload area to trigger file input
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        // Prevent default behavior for drag events
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        // Highlight drop area when item is dragged over it
        ['dragenter', 'dragover'].forEach(eventName => {
            uploadArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            uploadArea.classList.add('highlight');
        }
        
        function unhighlight() {
            uploadArea.classList.remove('highlight');
        }
        
        // Handle dropped files
        uploadArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            fileInput.files = files;
            handleFiles(files);
        }
        
        // Handle selected files
        fileInput.addEventListener('change', function() {
            handleFiles(this.files);
        });
        
        function handleFiles(files) {
            if (files.length > 0) {
                const file = files[0];
                
                // Display file info
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                
                // Show preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewContainer.style.display = 'block';
                    uploadArea.style.display = 'none';
                }
                reader.readAsDataURL(file);
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }
        
        // Form validation
        document.getElementById('receipt-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            const business = document.getElementById('business');
            const receiptDate = document.getElementById('receipt-date');
            const receiptAmount = document.getElementById('receipt-amount');
            const receiptImage = document.getElementById('receipt-image');
            const terms = document.getElementById('terms');
            
            // Reset previous errors
            document.querySelectorAll('.form-group').forEach(group => {
                group.classList.remove('error');
            });
            document.getElementById('upload-error').style.display = 'none';
            
            // Validate business
            if (business.value === '') {
                business.parentElement.classList.add('error');
                isValid = false;
            }
            
            // Validate date
            if (!receiptDate.value) {
                receiptDate.parentElement.classList.add('error');
                isValid = false;
            }
            
            // Validate amount
            if (!receiptAmount.value || receiptAmount.value <= 0) {
                receiptAmount.parentElement.classList.add('error');
                isValid = false;
            }
            
            // Validate image
            if (!receiptImage.files || receiptImage.files.length === 0) {
                document.getElementById('upload-error').style.display = 'block';
                isValid = false;
            }
            
            // Validate terms
            if (!terms.checked) {
                terms.parentElement.classList.add('error');
                isValid = false;
            }
            
            if (isValid) {
                // Show loading state
                const submitBtn = this.querySelector('.auth-btn');
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;
                
                // Simulate form submission (would be replaced with actual API call)
                setTimeout(() => {
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                    
                    // Show success message
                    document.querySelector('.success-message').style.display = 'block';
                    
                    // Reset form after delay
                    setTimeout(() => {
                        this.reset();
                        previewContainer.style.display = 'none';
                        uploadArea.style.display = 'block';
                        document.querySelector('.success-message').style.display = 'none';
                    }, 3000);
                }, 2000);
            }
        });
        
        // Support link
        document.getElementById('support-link').addEventListener('click', function(e) {
            e.preventDefault();
            alert('For support, please email info@c4bingo.org or call (555) 123-4567');
        });
    </script>
</body>
</html>
